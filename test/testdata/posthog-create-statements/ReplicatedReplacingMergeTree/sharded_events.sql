CREATE TABLE default.sharded_events (`uuid` UUID, `event` String, `properties` String CODEC(ZSTD(3)), `timestamp` DateTime64(6, 'UTC'), `team_id` Int64, `distinct_id` String, `elements_chain` String, `created_at` DateTime64(6, 'UTC'), `person_id` UUID, `person_created_at` DateTime64(3), `person_properties` String CODEC(ZSTD(3)), `group0_properties` String CODEC(ZSTD(3)), `group1_properties` String CODEC(ZSTD(3)), `group2_properties` String CODEC(ZSTD(3)), `group3_properties` String CODEC(ZSTD(3)), `group4_properties` String CODEC(ZSTD(3)), `group0_created_at` DateTime64(3), `group1_created_at` DateTime64(3), `group2_created_at` DateTime64(3), `group3_created_at` DateTime64(3), `group4_created_at` DateTime64(3), `person_mode` Enum8('full' = 0, 'propertyless' = 1, 'force_upgrade' = 2), `$group_0` String MATERIALIZED replaceRegexpAll(JSONExtractRaw(properties, '$group_0'), '^"|"$', '') COMMENT 'column_materializer::$group_0', `$group_1` String MATERIALIZED replaceRegexpAll(JSONExtractRaw(properties, '$group_1'), '^"|"$', '') COMMENT 'column_materializer::$group_1', `$group_2` String MATERIALIZED replaceRegexpAll(JSONExtractRaw(properties, '$group_2'), '^"|"$', '') COMMENT 'column_materializer::$group_2', `$group_3` String MATERIALIZED replaceRegexpAll(JSONExtractRaw(properties, '$group_3'), '^"|"$', '') COMMENT 'column_materializer::$group_3', `$group_4` String MATERIALIZED replaceRegexpAll(JSONExtractRaw(properties, '$group_4'), '^"|"$', '') COMMENT 'column_materializer::$group_4', `$window_id` String MATERIALIZED replaceRegexpAll(JSONExtractRaw(properties, '$window_id'), '^"|"$', '') COMMENT 'column_materializer::$window_id', `$session_id` String MATERIALIZED replaceRegexpAll(JSONExtractRaw(properties, '$session_id'), '^"|"$', '') COMMENT 'column_materializer::$session_id', `$session_id_uuid` Nullable(UInt128) MATERIALIZED toUInt128(JSONExtract(properties, '$session_id', 'Nullable(UUID)')), `elements_chain_href` String MATERIALIZED extract(elements_chain, '(?::|")href="(.*?)"'), `elements_chain_texts` Array(String) MATERIALIZED arrayDistinct(extractAll(elements_chain, '(?::|")text="(.*?)"')), `elements_chain_elements` Array(Enum8('a' = 1, 'button' = 2, 'form' = 3, 'input' = 4, 'select' = 5, 'textarea' = 6, 'label' = 7)) MATERIALIZED arrayDistinct(extractAll(elements_chain, '(?:^|;)(a|button|form|input|select|textarea|label)(?:\\.|$|:)')), `properties_group_custom` Map(String, String) MATERIALIZED mapSort(mapFilter((key, _) -> ((key NOT LIKE '$%') AND (key NOT IN ('token', 'distinct_id', 'utm_source', 'utm_medium', 'utm_campaign', 'utm_content', 'utm_term', 'gclid', 'gad_source', 'gclsrc', 'dclid', 'gbraid', 'wbraid', 'fbclid', 'msclkid', 'twclid', 'li_fat_id', 'mc_cid', 'igshid', 'ttclid', 'rdt_cid', 'epik', 'qclid', 'sccid', 'irclid', '_kx'))), CAST(JSONExtractKeysAndValues(properties, 'String'), 'Map(String, String)'))) CODEC(ZSTD(1)), `properties_group_ai` Map(String, String) MATERIALIZED mapSort(mapFilter((key, _) -> ((key LIKE '$ai_%') AND (key != '$ai_input') AND (key != '$ai_output_choices')), CAST(JSONExtractKeysAndValues(properties, 'String'), 'Map(String, String)'))) CODEC(ZSTD(1)), `properties_group_feature_flags` Map(String, String) MATERIALIZED mapSort(mapFilter((key, _) -> (key LIKE '$feature/%'), CAST(JSONExtractKeysAndValues(properties, 'String'), 'Map(String, String)'))) CODEC(ZSTD(1)), `person_properties_map_custom` Map(String, String) MATERIALIZED mapSort(mapFilter((key, _) -> (key NOT LIKE '$%'), CAST(JSONExtractKeysAndValues(person_properties, 'String'), 'Map(String, String)'))) CODEC(ZSTD(1)), `_timestamp` DateTime, `_offset` UInt64, `inserted_at` Nullable(DateTime64(6, 'UTC')) DEFAULT now64(), `consumer_breadcrumbs` Array(String), `elements_chain_ids` Array(String) MATERIALIZED arrayDistinct(extractAll(elements_chain, '(?::|")attr_id="(.*?)"')), `is_deleted` Bool, `properties_map_ephemeral` Map(String, String) EPHEMERAL CAST(JSONExtractKeysAndValues(properties, 'String'), 'Map(String, String)'), `person_properties_map_ephemeral` Map(String, String) EPHEMERAL CAST(JSONExtractKeysAndValues(person_properties, 'String'), 'Map(String, String)'), `mat_$app_build` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$app_build'), '^"|"$', ''), `mat_$app_name` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$app_name'), '^"|"$', ''), `mat_$app_namespace` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$app_namespace'), '^"|"$', ''), `mat_$app_version` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$app_version'), '^"|"$', ''), `mat_$browser` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$browser'), '^"|"$', ''), `mat_$browser_language` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$browser_language'), '^"|"$', ''), `mat_$browser_version` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$browser_version'), '^"|"$', ''), `mat_$current_url` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$current_url'), '^"|"$', ''), `mat_$device_type` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$device_type'), '^"|"$', ''), `mat_$exception_fingerprint` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$exception_fingerprint'), '^"|"$', ''), `mat_$exception_functions` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$exception_functions'), '^"|"$', ''), `mat_$exception_issue_id` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$exception_issue_id'), '^"|"$', ''), `mat_$exception_sources` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$exception_sources'), '^"|"$', ''), `mat_$exception_types` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$exception_types'), '^"|"$', ''), `mat_$exception_values` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$exception_values'), '^"|"$', ''), `mat_$geoip_city_name` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$geoip_city_name'), '^"|"$', ''), `mat_$geoip_country_code` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$geoip_country_code'), '^"|"$', ''), `mat_$geoip_subdivision_1_code` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$geoip_subdivision_1_code'), '^"|"$', ''), `mat_$geoip_subdivision_1_name` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$geoip_subdivision_1_name'), '^"|"$', ''), `mat_$host` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$host'), '^"|"$', ''), `mat_$lib` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$lib'), '^"|"$', ''), `mat_$lib_version` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$lib_version'), '^"|"$', ''), `mat_$os` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$os'), '^"|"$', ''), `mat_$os_version` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$os_version'), '^"|"$', ''), `mat_$pathname` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$pathname'), '^"|"$', ''), `mat_$prev_pageview_max_content_percentage` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$prev_pageview_max_content_percentage'), '^"|"$', ''), `mat_$prev_pageview_max_scroll_percentage` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$prev_pageview_max_scroll_percentage'), '^"|"$', ''), `mat_$prev_pageview_pathname` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$prev_pageview_pathname'), '^"|"$', ''), `mat_$raw_user_agent` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$raw_user_agent'), '^"|"$', ''), `mat_$referrer` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$referrer'), '^"|"$', ''), `mat_$referring_domain` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$referring_domain'), '^"|"$', ''), `mat_$screen_height` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$screen_height'), '^"|"$', ''), `mat_$screen_name` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$screen_name'), '^"|"$', ''), `mat_$screen_width` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$screen_width'), '^"|"$', ''), `mat_$timezone_offset` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$timezone_offset'), '^"|"$', ''), `mat_$viewport_height` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$viewport_height'), '^"|"$', ''), `mat_$viewport_width` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '$viewport_width'), '^"|"$', ''), `mat__kx` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, '_kx'), '^"|"$', ''), `mat_dclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'dclid'), '^"|"$', ''), `mat_epik` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'epik'), '^"|"$', ''), `mat_fbclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'fbclid'), '^"|"$', ''), `mat_gad_source` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'gad_source'), '^"|"$', ''), `mat_gbraid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'gbraid'), '^"|"$', ''), `mat_gclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'gclid'), '^"|"$', ''), `mat_gclsrc` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'gclsrc'), '^"|"$', ''), `mat_igshid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'igshid'), '^"|"$', ''), `mat_irclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'irclid'), '^"|"$', ''), `mat_li_fat_id` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'li_fat_id'), '^"|"$', ''), `mat_mc_cid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'mc_cid'), '^"|"$', ''), `mat_msclkid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'msclkid'), '^"|"$', ''), `mat_qclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'qclid'), '^"|"$', ''), `mat_rdt_cid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'rdt_cid'), '^"|"$', ''), `mat_sccid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'sccid'), '^"|"$', ''), `mat_ttclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'ttclid'), '^"|"$', ''), `mat_twclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'twclid'), '^"|"$', ''), `mat_utm_campaign` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'utm_campaign'), '^"|"$', ''), `mat_utm_content` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'utm_content'), '^"|"$', ''), `mat_utm_medium` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'utm_medium'), '^"|"$', ''), `mat_utm_source` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'utm_source'), '^"|"$', ''), `mat_utm_term` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'utm_term'), '^"|"$', ''), `mat_wbraid` String DEFAULT replaceRegexpAll(JSONExtractRaw(properties, 'wbraid'), '^"|"$', ''), `mat_pp_$app_build` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$app_build'), '^"|"$', ''), `mat_pp_$app_name` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$app_name'), '^"|"$', ''), `mat_pp_$app_namespace` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$app_namespace'), '^"|"$', ''), `mat_pp_$app_version` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$app_version'), '^"|"$', ''), `mat_pp_$browser` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$browser'), '^"|"$', ''), `mat_pp_$browser_version` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$browser_version'), '^"|"$', ''), `mat_pp_$current_url` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$current_url'), '^"|"$', ''), `mat_pp_$device_type` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$device_type'), '^"|"$', ''), `mat_pp_$initial_Email` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_Email'), '^"|"$', ''), `mat_pp_$initial_Name` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_Name'), '^"|"$', ''), `mat_pp_$initial_UserName` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_UserName'), '^"|"$', ''), `mat_pp_$initial_Username` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_Username'), '^"|"$', ''), `mat_pp_$initial__kx` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial__kx'), '^"|"$', ''), `mat_pp_$initial_app_build` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_app_build'), '^"|"$', ''), `mat_pp_$initial_app_name` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_app_name'), '^"|"$', ''), `mat_pp_$initial_app_namespace` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_app_namespace'), '^"|"$', ''), `mat_pp_$initial_app_version` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_app_version'), '^"|"$', ''), `mat_pp_$initial_browser` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_browser'), '^"|"$', ''), `mat_pp_$initial_browser_version` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_browser_version'), '^"|"$', ''), `mat_pp_$initial_current_url` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_current_url'), '^"|"$', ''), `mat_pp_$initial_dclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_dclid'), '^"|"$', ''), `mat_pp_$initial_device_type` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_device_type'), '^"|"$', ''), `mat_pp_$initial_email` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_email'), '^"|"$', ''), `mat_pp_$initial_epik` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_epik'), '^"|"$', ''), `mat_pp_$initial_fbclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_fbclid'), '^"|"$', ''), `mat_pp_$initial_gad_source` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_gad_source'), '^"|"$', ''), `mat_pp_$initial_gbraid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_gbraid'), '^"|"$', ''), `mat_pp_$initial_gclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_gclid'), '^"|"$', ''), `mat_pp_$initial_gclsrc` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_gclsrc'), '^"|"$', ''), `mat_pp_$initial_igshid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_igshid'), '^"|"$', ''), `mat_pp_$initial_irclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_irclid'), '^"|"$', ''), `mat_pp_$initial_li_fat_id` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_li_fat_id'), '^"|"$', ''), `mat_pp_$initial_mc_cid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_mc_cid'), '^"|"$', ''), `mat_pp_$initial_msclkid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_msclkid'), '^"|"$', ''), `mat_pp_$initial_name` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_name'), '^"|"$', ''), `mat_pp_$initial_os` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_os'), '^"|"$', ''), `mat_pp_$initial_os_version` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_os_version'), '^"|"$', ''), `mat_pp_$initial_pathname` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_pathname'), '^"|"$', ''), `mat_pp_$initial_qclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_qclid'), '^"|"$', ''), `mat_pp_$initial_raw_user_agent` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_raw_user_agent'), '^"|"$', ''), `mat_pp_$initial_rdt_cid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_rdt_cid'), '^"|"$', ''), `mat_pp_$initial_referrer` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_referrer'), '^"|"$', ''), `mat_pp_$initial_referring_domain` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_referring_domain'), '^"|"$', ''), `mat_pp_$initial_sccid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_sccid'), '^"|"$', ''), `mat_pp_$initial_screen_height` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_screen_height'), '^"|"$', ''), `mat_pp_$initial_screen_width` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_screen_width'), '^"|"$', ''), `mat_pp_$initial_ttclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_ttclid'), '^"|"$', ''), `mat_pp_$initial_twclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_twclid'), '^"|"$', ''), `mat_pp_$initial_username` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_username'), '^"|"$', ''), `mat_pp_$initial_utm_campaign` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_utm_campaign'), '^"|"$', ''), `mat_pp_$initial_utm_content` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_utm_content'), '^"|"$', ''), `mat_pp_$initial_utm_medium` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_utm_medium'), '^"|"$', ''), `mat_pp_$initial_utm_source` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_utm_source'), '^"|"$', ''), `mat_pp_$initial_utm_term` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_utm_term'), '^"|"$', ''), `mat_pp_$initial_viewport_height` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_viewport_height'), '^"|"$', ''), `mat_pp_$initial_viewport_width` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_viewport_width'), '^"|"$', ''), `mat_pp_$initial_wbraid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$initial_wbraid'), '^"|"$', ''), `mat_pp_$os` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$os'), '^"|"$', ''), `mat_pp_$os_version` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$os_version'), '^"|"$', ''), `mat_pp_$pathname` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$pathname'), '^"|"$', ''), `mat_pp_$raw_user_agent` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$raw_user_agent'), '^"|"$', ''), `mat_pp_$referrer` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$referrer'), '^"|"$', ''), `mat_pp_$referring_domain` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$referring_domain'), '^"|"$', ''), `mat_pp_$screen_height` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$screen_height'), '^"|"$', ''), `mat_pp_$screen_width` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$screen_width'), '^"|"$', ''), `mat_pp_$viewport_height` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$viewport_height'), '^"|"$', ''), `mat_pp_$viewport_width` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '$viewport_width'), '^"|"$', ''), `mat_pp_Email` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'Email'), '^"|"$', ''), `mat_pp_Name` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'Name'), '^"|"$', ''), `mat_pp_UserName` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'UserName'), '^"|"$', ''), `mat_pp_Username` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'Username'), '^"|"$', ''), `mat_pp__kx` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, '_kx'), '^"|"$', ''), `mat_pp_dclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'dclid'), '^"|"$', ''), `mat_pp_email` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'email'), '^"|"$', ''), `mat_pp_epik` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'epik'), '^"|"$', ''), `mat_pp_fbclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'fbclid'), '^"|"$', ''), `mat_pp_gad_source` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'gad_source'), '^"|"$', ''), `mat_pp_gbraid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'gbraid'), '^"|"$', ''), `mat_pp_gclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'gclid'), '^"|"$', ''), `mat_pp_gclsrc` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'gclsrc'), '^"|"$', ''), `mat_pp_igshid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'igshid'), '^"|"$', ''), `mat_pp_irclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'irclid'), '^"|"$', ''), `mat_pp_li_fat_id` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'li_fat_id'), '^"|"$', ''), `mat_pp_mc_cid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'mc_cid'), '^"|"$', ''), `mat_pp_msclkid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'msclkid'), '^"|"$', ''), `mat_pp_name` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'name'), '^"|"$', ''), `mat_pp_qclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'qclid'), '^"|"$', ''), `mat_pp_rdt_cid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'rdt_cid'), '^"|"$', ''), `mat_pp_sccid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'sccid'), '^"|"$', ''), `mat_pp_ttclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'ttclid'), '^"|"$', ''), `mat_pp_twclid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'twclid'), '^"|"$', ''), `mat_pp_username` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'username'), '^"|"$', ''), `mat_pp_utm_campaign` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'utm_campaign'), '^"|"$', ''), `mat_pp_utm_content` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'utm_content'), '^"|"$', ''), `mat_pp_utm_medium` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'utm_medium'), '^"|"$', ''), `mat_pp_utm_source` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'utm_source'), '^"|"$', ''), `mat_pp_utm_term` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'utm_term'), '^"|"$', ''), `mat_pp_wbraid` String DEFAULT replaceRegexpAll(JSONExtractRaw(person_properties, 'wbraid'), '^"|"$', ''), INDEX `minmax_$group_0` `$group_0` TYPE minmax GRANULARITY 1, INDEX `minmax_$group_1` `$group_1` TYPE minmax GRANULARITY 1, INDEX `minmax_$group_2` `$group_2` TYPE minmax GRANULARITY 1, INDEX `minmax_$group_3` `$group_3` TYPE minmax GRANULARITY 1, INDEX `minmax_$group_4` `$group_4` TYPE minmax GRANULARITY 1, INDEX `minmax_$window_id` `$window_id` TYPE minmax GRANULARITY 1, INDEX `minmax_$session_id` `$session_id` TYPE minmax GRANULARITY 1, INDEX properties_group_custom_keys_bf mapKeys(properties_group_custom) TYPE bloom_filter GRANULARITY 1, INDEX properties_group_custom_values_bf mapValues(properties_group_custom) TYPE bloom_filter GRANULARITY 1, INDEX properties_group_ai_keys_bf mapKeys(properties_group_ai) TYPE bloom_filter GRANULARITY 1, INDEX properties_group_ai_values_bf mapValues(properties_group_ai) TYPE bloom_filter GRANULARITY 1, INDEX properties_group_feature_flags_keys_bf mapKeys(properties_group_feature_flags) TYPE bloom_filter GRANULARITY 1, INDEX properties_group_feature_flags_values_bf mapValues(properties_group_feature_flags) TYPE bloom_filter GRANULARITY 1, INDEX person_properties_map_custom_keys_bf mapKeys(person_properties_map_custom) TYPE bloom_filter GRANULARITY 1, INDEX person_properties_map_custom_values_bf mapValues(person_properties_map_custom) TYPE bloom_filter GRANULARITY 1, INDEX kafka_timestamp_minmax_sharded_events _timestamp TYPE minmax GRANULARITY 3, INDEX minmax_inserted_at coalesce(inserted_at, _timestamp) TYPE minmax GRANULARITY 1, INDEX is_deleted_idx is_deleted TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$app_build` `mat_$app_build` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$app_name` `mat_$app_name` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$app_namespace` `mat_$app_namespace` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$app_version` `mat_$app_version` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$browser` `mat_$browser` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$browser_language` `mat_$browser_language` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$browser_version` `mat_$browser_version` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$current_url` `mat_$current_url` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$device_type` `mat_$device_type` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$exception_fingerprint` `mat_$exception_fingerprint` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$exception_functions` `mat_$exception_functions` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$exception_issue_id` `mat_$exception_issue_id` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$exception_sources` `mat_$exception_sources` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$exception_types` `mat_$exception_types` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$exception_values` `mat_$exception_values` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$geoip_city_name` `mat_$geoip_city_name` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$geoip_country_code` `mat_$geoip_country_code` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$geoip_subdivision_1_code` `mat_$geoip_subdivision_1_code` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$geoip_subdivision_1_name` `mat_$geoip_subdivision_1_name` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$host` `mat_$host` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$lib` `mat_$lib` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$lib_version` `mat_$lib_version` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$os` `mat_$os` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$os_version` `mat_$os_version` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$pathname` `mat_$pathname` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$prev_pageview_max_content_percentage` `mat_$prev_pageview_max_content_percentage` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$prev_pageview_max_scroll_percentage` `mat_$prev_pageview_max_scroll_percentage` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$prev_pageview_pathname` `mat_$prev_pageview_pathname` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$raw_user_agent` `mat_$raw_user_agent` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$referrer` `mat_$referrer` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$referring_domain` `mat_$referring_domain` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$screen_height` `mat_$screen_height` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$screen_name` `mat_$screen_name` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$screen_width` `mat_$screen_width` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$timezone_offset` `mat_$timezone_offset` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$viewport_height` `mat_$viewport_height` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_$viewport_width` `mat_$viewport_width` TYPE minmax GRANULARITY 1, INDEX minmax_mat__kx mat__kx TYPE minmax GRANULARITY 1, INDEX minmax_mat_dclid mat_dclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_epik mat_epik TYPE minmax GRANULARITY 1, INDEX minmax_mat_fbclid mat_fbclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_gad_source mat_gad_source TYPE minmax GRANULARITY 1, INDEX minmax_mat_gbraid mat_gbraid TYPE minmax GRANULARITY 1, INDEX minmax_mat_gclid mat_gclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_gclsrc mat_gclsrc TYPE minmax GRANULARITY 1, INDEX minmax_mat_igshid mat_igshid TYPE minmax GRANULARITY 1, INDEX minmax_mat_irclid mat_irclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_li_fat_id mat_li_fat_id TYPE minmax GRANULARITY 1, INDEX minmax_mat_mc_cid mat_mc_cid TYPE minmax GRANULARITY 1, INDEX minmax_mat_msclkid mat_msclkid TYPE minmax GRANULARITY 1, INDEX minmax_mat_qclid mat_qclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_rdt_cid mat_rdt_cid TYPE minmax GRANULARITY 1, INDEX minmax_mat_sccid mat_sccid TYPE minmax GRANULARITY 1, INDEX minmax_mat_ttclid mat_ttclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_twclid mat_twclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_utm_campaign mat_utm_campaign TYPE minmax GRANULARITY 1, INDEX minmax_mat_utm_content mat_utm_content TYPE minmax GRANULARITY 1, INDEX minmax_mat_utm_medium mat_utm_medium TYPE minmax GRANULARITY 1, INDEX minmax_mat_utm_source mat_utm_source TYPE minmax GRANULARITY 1, INDEX minmax_mat_utm_term mat_utm_term TYPE minmax GRANULARITY 1, INDEX minmax_mat_wbraid mat_wbraid TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$app_build` `mat_pp_$app_build` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$app_name` `mat_pp_$app_name` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$app_namespace` `mat_pp_$app_namespace` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$app_version` `mat_pp_$app_version` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$browser` `mat_pp_$browser` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$browser_version` `mat_pp_$browser_version` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$current_url` `mat_pp_$current_url` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$device_type` `mat_pp_$device_type` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_Email` `mat_pp_$initial_Email` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_Name` `mat_pp_$initial_Name` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_UserName` `mat_pp_$initial_UserName` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_Username` `mat_pp_$initial_Username` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial__kx` `mat_pp_$initial__kx` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_app_build` `mat_pp_$initial_app_build` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_app_name` `mat_pp_$initial_app_name` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_app_namespace` `mat_pp_$initial_app_namespace` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_app_version` `mat_pp_$initial_app_version` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_browser` `mat_pp_$initial_browser` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_browser_version` `mat_pp_$initial_browser_version` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_current_url` `mat_pp_$initial_current_url` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_dclid` `mat_pp_$initial_dclid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_device_type` `mat_pp_$initial_device_type` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_email` `mat_pp_$initial_email` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_epik` `mat_pp_$initial_epik` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_fbclid` `mat_pp_$initial_fbclid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_gad_source` `mat_pp_$initial_gad_source` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_gbraid` `mat_pp_$initial_gbraid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_gclid` `mat_pp_$initial_gclid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_gclsrc` `mat_pp_$initial_gclsrc` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_igshid` `mat_pp_$initial_igshid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_irclid` `mat_pp_$initial_irclid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_li_fat_id` `mat_pp_$initial_li_fat_id` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_mc_cid` `mat_pp_$initial_mc_cid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_msclkid` `mat_pp_$initial_msclkid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_name` `mat_pp_$initial_name` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_os` `mat_pp_$initial_os` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_os_version` `mat_pp_$initial_os_version` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_pathname` `mat_pp_$initial_pathname` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_qclid` `mat_pp_$initial_qclid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_raw_user_agent` `mat_pp_$initial_raw_user_agent` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_rdt_cid` `mat_pp_$initial_rdt_cid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_referrer` `mat_pp_$initial_referrer` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_referring_domain` `mat_pp_$initial_referring_domain` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_sccid` `mat_pp_$initial_sccid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_screen_height` `mat_pp_$initial_screen_height` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_screen_width` `mat_pp_$initial_screen_width` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_ttclid` `mat_pp_$initial_ttclid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_twclid` `mat_pp_$initial_twclid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_username` `mat_pp_$initial_username` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_utm_campaign` `mat_pp_$initial_utm_campaign` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_utm_content` `mat_pp_$initial_utm_content` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_utm_medium` `mat_pp_$initial_utm_medium` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_utm_source` `mat_pp_$initial_utm_source` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_utm_term` `mat_pp_$initial_utm_term` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_viewport_height` `mat_pp_$initial_viewport_height` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_viewport_width` `mat_pp_$initial_viewport_width` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$initial_wbraid` `mat_pp_$initial_wbraid` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$os` `mat_pp_$os` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$os_version` `mat_pp_$os_version` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$pathname` `mat_pp_$pathname` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$raw_user_agent` `mat_pp_$raw_user_agent` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$referrer` `mat_pp_$referrer` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$referring_domain` `mat_pp_$referring_domain` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$screen_height` `mat_pp_$screen_height` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$screen_width` `mat_pp_$screen_width` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$viewport_height` `mat_pp_$viewport_height` TYPE minmax GRANULARITY 1, INDEX `minmax_mat_pp_$viewport_width` `mat_pp_$viewport_width` TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_Email mat_pp_Email TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_Name mat_pp_Name TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_UserName mat_pp_UserName TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_Username mat_pp_Username TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp__kx mat_pp__kx TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_dclid mat_pp_dclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_email mat_pp_email TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_epik mat_pp_epik TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_fbclid mat_pp_fbclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_gad_source mat_pp_gad_source TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_gbraid mat_pp_gbraid TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_gclid mat_pp_gclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_gclsrc mat_pp_gclsrc TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_igshid mat_pp_igshid TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_irclid mat_pp_irclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_li_fat_id mat_pp_li_fat_id TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_mc_cid mat_pp_mc_cid TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_msclkid mat_pp_msclkid TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_name mat_pp_name TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_qclid mat_pp_qclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_rdt_cid mat_pp_rdt_cid TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_sccid mat_pp_sccid TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_ttclid mat_pp_ttclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_twclid mat_pp_twclid TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_username mat_pp_username TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_utm_campaign mat_pp_utm_campaign TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_utm_content mat_pp_utm_content TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_utm_medium mat_pp_utm_medium TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_utm_source mat_pp_utm_source TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_utm_term mat_pp_utm_term TYPE minmax GRANULARITY 1, INDEX minmax_mat_pp_wbraid mat_pp_wbraid TYPE minmax GRANULARITY 1) ENGINE = ReplicatedReplacingMergeTree('/clickhouse/tables/{shard}/posthog.events', '{replica}', _timestamp) PARTITION BY toYYYYMM(timestamp) ORDER BY (team_id, toDate(timestamp), event, cityHash64(distinct_id), cityHash64(uuid)) SAMPLE BY cityHash64(distinct_id) SETTINGS index_granularity = 8192