CREATE TABLE default.events_recent (`uuid` UUID, `event` String, `properties` String CODEC(ZSTD(3)), `timestamp` DateTime64(6, 'UTC'), `team_id` Int64, `distinct_id` String, `elements_chain` String, `created_at` DateTime64(6, 'UTC'), `person_id` UUID, `person_created_at` DateTime64(3), `person_properties` String CODEC(ZSTD(3)), `group0_properties` String CODEC(ZSTD(3)), `group1_properties` String CODEC(ZSTD(3)), `group2_properties` String CODEC(ZSTD(3)), `group3_properties` String CODEC(ZSTD(3)), `group4_properties` String CODEC(ZSTD(3)), `group0_created_at` DateTime64(3), `group1_created_at` DateTime64(3), `group2_created_at` DateTime64(3), `group3_created_at` DateTime64(3), `group4_created_at` DateTime64(3), `person_mode` Enum8('full' = 0, 'propertyless' = 1, 'force_upgrade' = 2), `_timestamp` DateTime, `_offset` UInt64, `_partition` UInt64, `inserted_at` DateTime64(6, 'UTC') DEFAULT now64(), `_timestamp_ms` DateTime64(3)) ENGINE = ReplicatedReplacingMergeTree('/clickhouse/tables/noshard/posthog.events_recent', '{replica}-{shard}', _timestamp) PARTITION BY toStartOfHour(inserted_at) ORDER BY (team_id, toStartOfHour(inserted_at), event, cityHash64(distinct_id), cityHash64(uuid)) TTL toDateTime(inserted_at) + toIntervalDay(7) SETTINGS index_granularity = 8192